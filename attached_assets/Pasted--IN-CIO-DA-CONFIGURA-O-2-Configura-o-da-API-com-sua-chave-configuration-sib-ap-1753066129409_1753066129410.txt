
# --- INÍCIO DA CONFIGURAÇÃO ---

# 2. Configuração da API com sua chave
configuration = sib_api_v3_sdk.Configuration()
configuration.api_key['api-key'] = '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'

# ⬇️ MUITO IMPORTANTE: Altere o e-mail abaixo para um remetente que você já VERIFICOU na sua conta Brevo.
# Este campo NÃO é interativo, precisa ser configurado aqui.
remetente_verificado = {"name": "Vitor Cavalcanti", "email": "cavalcantisilvav@gmail.com"}

# --- FIM DA CONFIGURAÇÃO ---


# 3. Coleta interativa das informações do e-mail
print("--- Preparando para enviar um novo e-mail ---")
destinatario_email = input("Digite o e-mail do DESTINATÁRIO: ")
destinatario_nome = input("Digite o nome do DESTINATÁRIO: ")
assunto = input("Digite o ASSUNTO do e-mail: ")
print("Digite o conteúdo da mensagem (em texto simples). Pressione Enter ao finalizar.")
conteudo_texto = input()

# Formata o texto simples em um HTML básico para envio
html_para_enviar = f"<html><body><p>{conteudo_texto}</p></body></html>"


# 4. Monta o e-mail para envio
print("\n--- Resumo do E-mail ---")
print(f"De: {remetente_verificado['name']} <{remetente_verificado['email']}>")
print(f"Para: {destinatario_nome} <{destinatario_email}>")
print(f"Assunto: {assunto}")
print("--------------------------\n")

# Instancia o cliente da API
api_instance = sib_api_v3_sdk.TransactionalEmailsApi(sib_api_v3_sdk.ApiClient(configuration))

# Define o destinatário
to = [{"email": destinatario_email, "name": destinatario_nome}]

# Cria o objeto do e-mail a ser enviado
send_smtp_email = sib_api_v3_sdk.SendSmtpEmail(
    to=to,
    html_content=html_para_enviar,
    sender=remetente_verificado,
    subject=assunto
)

# 5. Envia o e-mail e trata a resposta
try:
    print("Enviando e-mail pela API da Brevo...")
    api_response = api_instance.send_transac_email(send_smtp_email)
    print("\n✅ SUCESSO! A API da Brevo aceitou o e-mail para envio.")
    pprint(api_response)
except ApiException as e:
    print(f"\n❌ ERRO: Ocorreu uma exceção ao enviar o e-mail: {e}")